{% extends "shop/base.html" %}
{% load static %}

{% block title %}Search{% if q %}: “{{ q }}”{% endif %}{% endblock %}

{% block content %}
  <div class="container" style="display:grid; grid-template-columns: 240px 1fr; gap: 24px;">
    <!-- Sidebar: categories (optional, mirrors list page) -->
    <aside>
      <h3>Categories</h3>
      <ul style="list-style:none; padding:0; margin:12px 0; display:grid; gap:8px;">
        <li><a href="{% url 'shop:product_list' %}">All</a></li>
        {% for c in categories %}
          <li><a href="{{ c.get_absolute_url }}">{{ c.name }}</a></li>
        {% endfor %}
      </ul>
    </aside>

    <section>
      <h1 style="margin-top:0;">Search{% if q %}: “{{ q }}”{% endif %}</h1>

      {% if q and products %}
        <div class="grid">
          {% for product in products %}
            <a class="card" href="{{ product.get_absolute_url }}">
              <img
                class="card__img"
                src="{% if product.image %}{{ product.image.url }}{% else %}{% static 'img/no_image.png' %}{% endif %}"
                alt="{{ product.name }}"
              >
              <div class="card__body">
                <h3 class="card__title">{{ product.name }}</h3>
                <div class="card__meta">
                  <span>£{{ product.price }}</span>
                  {% if product.team %}<span>{{ product.team.name }}</span>{% endif %}
                </div>
              </div>
            </a>
          {% endfor %}
        </div>
      {% elif q %}
        <p>No products found for “{{ q }}”.</p>
      {% else %}
        <p>Type a search in the box above to find products.</p>
      {% endif %}
    </section>
  </div>
{% endblock %}
