{% load static %}
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>{% block title %}My shop{% endblock %}</title>
    <link href="{% static 'css/style.css' %}" rel="stylesheet">
    <link href="{% static 'css/site.css' %}" rel="stylesheet">
  </head>
  <body>

    <div class="announce">BUY 2 SAVE 10% — USE CODE: BUY2SAVE10</div>

    <header class="site-header">
      <div class="container nav">
        <a href="{% url 'shop:product_list' %}" class="brand">Football Shirt Emporium</a>

        <nav class="menu">
          <a href="{% url 'shop:product_list' %}">Shop</a>
          <a href="{% url 'cart:cart_detail' %}">Cart</a>
          {% if request.user.is_authenticated %}
            <a href="{% url 'account:dashboard' %}">My account</a>
            <a href="{% url 'logout' %}">Log out</a>
          {% else %}
            <a href="{% url 'login' %}">Log in</a>
          {% endif %}
        </nav>

        <div class="cart" style="margin-left: 16px;">
          {% with total_items=cart|length %}
            {% if total_items > 0 %}
              Your cart:
              <a href="{% url 'cart:cart_detail' %}">
                {{ total_items }} item{{ total_items|pluralize }},
                £{{ cart.get_total_price }}
              </a>
            {% elif not order %}
              Your cart is empty.
            {% endif %}
          {% endwith %}
        </div>
      </div>
    </header>

    <main class="container" style="padding: 20px 0;">
      {% block content %}{% endblock %}

      {# Show hero + grid only on pages that pass `products` (your product list view) #}
      {% if products %}
        <section class="hero">
          <h1>Nostalgia. Your Way.</h1>
          <p>Re-live your favourite memories!</p>
          <a class="btn" href="{% url 'shop:product_list' %}">Shop now</a>
        </section>

        <section class="mt-4">
          <div class="grid">
            {% for product in products %}
              <a class="card" href="{{ product.get_absolute_url }}">
                <img
                  class="card__img"
                  src="{% if product.image %}{{ product.image.url }}{% else %}{% static 'img/no_image.png' %}{% endif %}"
                  alt="{{ product.name }}"
                >
                <div class="card__body">
                  <h3 class="card__title">{{ product.name }}</h3>
                  <div class="card__meta">
                    <span>£{{ product.price }}</span>
                    {# add badge later if you add a field #}
                    {# {% if product.is_on_sale %}<span class="badge">Sale</span>{% endif %} #}
                  </div>
                </div>
              </a>
            {% empty %}
              <p>No products yet.</p>
            {% endfor %}
          </div>
        </section>
      {% endif %}
    </main>

    <footer class="site-footer">
      <div class="container">© {{ now|date:"Y" }} Football Shirt Emporium</div>
    </footer>
  </body>
</html>
